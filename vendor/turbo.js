!function(){var e={};function r(e,r,n,t,o,a,i){try{var c=e[a](i),u=c.value}catch(e){n(e);return}c.done?r(u):Promise.resolve(u).then(t,o)}function n(e){return function(){var n=this,t=arguments;return new Promise(function(o,a){var i=e.apply(n,t);function c(e){r(i,o,a,c,u,"next",e)}function u(e){r(i,o,a,c,u,"throw",e)}c(void 0)})}}function t(e){if(Array.isArray(e))return e}function o(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=Array(r);n<r;n++)t[n]=e[n];return t}function i(e,r){if(e){if("string"==typeof e)return a(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,r)}}function c(e,r){return t(e)||function(e,r){var n,t,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a=[],i=!0,c=!1;try{for(o=o.call(e);!(i=(n=o.next()).done)&&(a.push(n.value),!r||a.length!==r);i=!0);}catch(e){c=!0,t=e}finally{try{i||null==o.return||o.return()}finally{if(c)throw t}}return a}}(e,r)||i(e,r)||o()}function u(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function l(e,r){var n,t,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(u){return function(c){if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,t&&(o=2&c[0]?t.return:c[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,c[1])).done)return o;switch(t=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,t=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===c[0]||2===c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=r.call(e,a)}catch(e){c=[6,e],t=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}}"function"==typeof SuppressedError&&SuppressedError,Object.defineProperty(e,"__esModule",{value:!0}),e.encode=e.decode=void 0;var f={};function s(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function d(e){return t(e)||s(e)||i(e)||o()}function y(e){return function(e){if(Array.isArray(e))return a(e)}(e)||s(e)||i(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}Object.defineProperty(f,"__esModule",{value:!0}),f.flatten=void 0;var E={};function h(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function v(e){var r=this.indices,n=r.get(e);if(n)return[n];if(void 0===e)return E.UNDEFINED;if(null===e)return E.NULL;if(Number.isNaN(e))return E.NAN;if(e===Number.POSITIVE_INFINITY)return E.POSITIVE_INFINITY;if(e===Number.NEGATIVE_INFINITY)return E.NEGATIVE_INFINITY;if(0===e&&1/e<0)return E.NEGATIVE_ZERO;var t=this.index++;return r.set(e,t),p.call(this,e,t),t}function p(e,r){for(var n=this,t=this.deferred,o=this.plugins,a=this.postPlugins,i=this.stringified,l=[[e,r]];l.length>0;){var f=c(l.pop(),2),s=f[0],h=f[1],p=function(e){return Object.keys(e).map(function(r){return'"_'.concat(v.call(n,r),'":').concat(v.call(n,e[r]))}).join(",")},T=null;switch(void 0===s?"undefined":u(s)){case"boolean":case"number":case"string":i[h]=JSON.stringify(s);break;case"bigint":i[h]='["'.concat(E.TYPE_BIGINT,'","').concat(s,'"]');break;case"symbol":var P=Symbol.keyFor(s);P?i[h]='["'.concat(E.TYPE_SYMBOL,'",').concat(JSON.stringify(P),"]"):T=Error("Cannot encode symbol unless created with Symbol.for()");break;case"object":if(!s){i[h]="".concat(E.NULL);break}var O=Array.isArray(s),S=!1,_=!0,N=!1,I=void 0;if(!O&&o)try{for(var m,g=o[Symbol.iterator]();!(_=(m=g.next()).done);_=!0){var w=(0,m.value)(s);if(Array.isArray(w)){S=!0;var Y=d(w),R=Y[0],A=Y.slice(1);i[h]="[".concat(JSON.stringify(R)),A.length>0&&(i[h]+=",".concat(A.map(function(e){return v.call(n,e)}).join(","))),i[h]+="]";break}}}catch(e){N=!0,I=e}finally{try{_||null==g.return||g.return()}finally{if(N)throw I}}if(!S){var j=O?"[":"{";if(O){for(var L=0;L<s.length;L++)j+=(L?",":"")+(L in s?v.call(this,s[L]):E.HOLE);i[h]="".concat(j,"]")}else s instanceof Date?i[h]='["'.concat(E.TYPE_DATE,'",').concat(s.getTime(),"]"):s instanceof URL?i[h]='["'.concat(E.TYPE_URL,'",').concat(JSON.stringify(s.href),"]"):s instanceof RegExp?i[h]='["'.concat(E.TYPE_REGEXP,'",').concat(JSON.stringify(s.source),",").concat(JSON.stringify(s.flags),"]"):s instanceof Set?s.size>0?i[h]='["'.concat(E.TYPE_SET,'",').concat(y(s).map(function(e){return v.call(n,e)}).join(","),"]"):i[h]='["'.concat(E.TYPE_SET,'"]'):s instanceof Map?s.size>0?i[h]='["'.concat(E.TYPE_MAP,'",').concat(y(s).flatMap(function(e){var r=c(e,2),t=r[0],o=r[1];return[v.call(n,t),v.call(n,o)]}).join(","),"]"):i[h]='["'.concat(E.TYPE_MAP,'"]'):s instanceof Promise?(i[h]='["'.concat(E.TYPE_PROMISE,'",').concat(h,"]"),t[h]=s):s instanceof Error?(i[h]='["'.concat(E.TYPE_ERROR,'",').concat(JSON.stringify(s.message)),"Error"!==s.name&&(i[h]+=",".concat(JSON.stringify(s.name))),i[h]+="]"):null===Object.getPrototypeOf(s)?i[h]='["'.concat(E.TYPE_NULL_OBJECT,'",{').concat(p(s),"}]"):function(e){var r=Object.getPrototypeOf(e);return r===Object.prototype||null===r||Object.getOwnPropertyNames(r).sort().join("\0")===b}(s)?i[h]="{".concat(p(s),"}"):T=Error("Cannot encode object with prototype")}break;default:var x=Array.isArray(s),D=!1,M=!0,U=!1,V=void 0;if(!x&&o)try{for(var k,G=o[Symbol.iterator]();!(M=(k=G.next()).done);M=!0){var J=(0,k.value)(s);if(Array.isArray(J)){D=!0;var F=d(J),B=F[0],q=F.slice(1);i[h]="[".concat(JSON.stringify(B)),q.length>0&&(i[h]+=",".concat(q.map(function(e){return v.call(n,e)}).join(","))),i[h]+="]";break}}}catch(e){U=!0,V=e}finally{try{M||null==G.return||G.return()}finally{if(U)throw V}}D||(T=Error("Cannot encode function or unexpected type"))}if(T){var C=!1,Z=!0,H=!1,X=void 0;if(a)try{for(var z,W=a[Symbol.iterator]();!(Z=(z=W.next()).done);Z=!0){var $=(0,z.value)(s);if(Array.isArray($)){C=!0;var K=d($),Q=K[0],ee=K.slice(1);i[h]="[".concat(JSON.stringify(Q)),ee.length>0&&(i[h]+=",".concat(ee.map(function(e){return v.call(n,e)}).join(","))),i[h]+="]";break}}}catch(e){H=!0,X=e}finally{try{Z||null==W.return||W.return()}finally{if(H)throw X}}if(!C)throw T}}}Object.defineProperty(E,"__esModule",{value:!0}),E.createLineSplittingTransform=E.Deferred=E.TYPE_PREVIOUS_RESOLVED=E.TYPE_URL=E.TYPE_SYMBOL=E.TYPE_SET=E.TYPE_REGEXP=E.TYPE_PROMISE=E.TYPE_NULL_OBJECT=E.TYPE_MAP=E.TYPE_ERROR=E.TYPE_DATE=E.TYPE_BIGINT=E.UNDEFINED=E.POSITIVE_INFINITY=E.NULL=E.NEGATIVE_ZERO=E.NEGATIVE_INFINITY=E.NAN=E.HOLE=void 0,E.HOLE=-1,E.NAN=-2,E.NEGATIVE_INFINITY=-3,E.NEGATIVE_ZERO=-4,E.NULL=-5,E.POSITIVE_INFINITY=-6,E.UNDEFINED=-7,E.TYPE_BIGINT="B",E.TYPE_DATE="D",E.TYPE_ERROR="E",E.TYPE_MAP="M",E.TYPE_NULL_OBJECT="N",E.TYPE_PROMISE="P",E.TYPE_REGEXP="R",E.TYPE_SET="S",E.TYPE_SYMBOL="Y",E.TYPE_URL="U",E.TYPE_PREVIOUS_RESOLVED="Z",E.Deferred=function e(){var r=this;!function(e,r){if(!(e instanceof r))throw TypeError("Cannot call a class as a function")}(this,e),h(this,"promise",void 0),h(this,"resolve",void 0),h(this,"reject",void 0),this.promise=new Promise(function(e,n){r.resolve=e,r.reject=n})},E.createLineSplittingTransform=function(){var e=new TextDecoder,r="";return new TransformStream({transform:function(n,t){var o=e.decode(n,{stream:!0}),a=(r+o).split("\n");r=a.pop()||"";var i=!0,c=!1,u=void 0;try{for(var l,f=a[Symbol.iterator]();!(i=(l=f.next()).done);i=!0){var s=l.value;t.enqueue(s)}}catch(e){c=!0,u=e}finally{try{i||null==f.return||f.return()}finally{if(c)throw u}}},flush:function(e){r&&e.enqueue(r)}})},f.flatten=v;var b=Object.getOwnPropertyNames(Object.prototype).sort().join("\0"),T={};Object.defineProperty(T,"__esModule",{value:!0}),T.unflatten=void 0;var P="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:void 0;function O(e){for(var r,n=this.hydrated,t=this.values,o=this.deferred,a=this.plugins,i=[[e,function(e){r=e}]],l=[];i.length>0;)!function(){var e=c(i.pop(),2),r=e[0],f=e[1];switch(r){case E.UNDEFINED:return f(void 0);case E.NULL:return f(null);case E.NAN:return f(NaN);case E.POSITIVE_INFINITY:return f(1/0);case E.NEGATIVE_INFINITY:return f(-1/0);case E.NEGATIVE_ZERO:return f(-0)}if(n[r])return f(n[r]);var s=t[r];if(!s||(void 0===s?"undefined":u(s))!=="object")return n[r]=s,f(s);if(Array.isArray(s)){if("string"==typeof s[0]){var d=c(s,3),h=d[0],v=d[1],p=d[2];switch(h){case E.TYPE_DATE:return f(n[r]=new Date(v));case E.TYPE_URL:return f(n[r]=new URL(v));case E.TYPE_BIGINT:return f(n[r]=BigInt(v));case E.TYPE_REGEXP:return f(n[r]=new RegExp(v,p));case E.TYPE_SYMBOL:return f(n[r]=Symbol.for(v));case E.TYPE_SET:var b=new Set;n[r]=b;for(var T=1;T<s.length;T++)i.push([s[T],function(e){b.add(e)}]);return f(b);case E.TYPE_MAP:var O=new Map;n[r]=O;for(var S=1;S<s.length;S+=2)!function(e){var r=[];i.push([s[e+1],function(e){r[1]=e}]),i.push([s[e],function(e){r[0]=e}]),l.push(function(){O.set(r[0],r[1])})}(S);return f(O);case E.TYPE_NULL_OBJECT:var _=Object.create(null);n[r]=_;var N=!0,I=!1,m=void 0;try{for(var g,w=Object.keys(v).reverse()[Symbol.iterator]();!(N=(g=w.next()).done);N=!0)!function(){var e=g.value,r=[];i.push([v[e],function(e){r[1]=e}]),i.push([Number(e.slice(1)),function(e){r[0]=e}]),l.push(function(){_[r[0]]=r[1]})}()}catch(e){I=!0,m=e}finally{try{N||null==w.return||w.return()}finally{if(I)throw m}}return f(_);case E.TYPE_PROMISE:if(n[v])f(n[r]=n[v]);else{var Y=new E.Deferred;o[v]=Y,f(n[r]=Y.promise)}return;case E.TYPE_ERROR:var R=c(s,3),A=R[1],j=R[2],L=j&&P&&P[j]?new P[j](A):Error(A);return n[r]=L,f(L);case E.TYPE_PREVIOUS_RESOLVED:return f(n[r]=n[v]);default:if(Array.isArray(a)){for(var x=function(e){i.push([M[e],function(r){D[e]=r}])},D=[],M=s.slice(1),U=0;U<M.length;U++)x(U);return l.push(function(){var e=!0,t=!1,o=void 0;try{for(var i,c=a[Symbol.iterator]();!(e=(i=c.next()).done);e=!0){var u=i.value.apply(void 0,[s[0]].concat(y(D)));if(u){f(n[r]=u.value);return}}}catch(e){t=!0,o=e}finally{try{e||null==c.return||c.return()}finally{if(t)throw o}}throw SyntaxError()})}throw SyntaxError()}}else{var V=function(e){var r=s[e];r!==E.HOLE&&i.push([r,function(r){k[e]=r}])},k=[];n[r]=k;for(var G=0;G<s.length;G++)V(G);f(k)}}else{var J={};n[r]=J;var F=!0,B=!1,q=void 0;try{for(var C,Z=Object.keys(s).reverse()[Symbol.iterator]();!(F=(C=Z.next()).done);F=!0)!function(){var e=C.value,r=[];i.push([s[e],function(e){r[1]=e}]),i.push([Number(e.slice(1)),function(e){r[0]=e}]),l.push(function(){J[r[0]]=r[1]})}()}catch(e){B=!0,q=e}finally{try{F||null==Z.return||Z.return()}finally{if(B)throw q}}f(J)}}();for(;l.length>0;)l.pop()();return r}function S(){return(S=n(function(e,r){var n,t,o,a,i,c;return l(this,function(u){switch(u.label){case 0:return n=(null!=r?r:{}).plugins,t=new E.Deferred,o=e.pipeThrough((0,E.createLineSplittingTransform)()).getReader(),[4,_.call(a={values:[],hydrated:[],deferred:{},plugins:n},o)];case 1:return i=u.sent(),c=t.promise,i.done?t.resolve():c=I.call(a,o).then(t.resolve).catch(function(e){var r=!0,n=!1,o=void 0;try{for(var i,c=Object.values(a.deferred)[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)i.value.reject(e)}catch(e){n=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw o}}t.reject(e)}),[2,{done:c.then(function(){return o.closed}),value:i.value}]}})})).apply(this,arguments)}function _(e){return N.apply(this,arguments)}function N(){return(N=n(function(e){var r,n;return l(this,function(t){switch(t.label){case 0:return[4,e.read()];case 1:if(!(r=t.sent()).value)throw SyntaxError();try{n=JSON.parse(r.value)}catch(e){throw SyntaxError()}return[2,{done:r.done,value:T.unflatten.call(this,n)}]}})})).apply(this,arguments)}function I(e){return m.apply(this,arguments)}function m(){return(m=n(function(e){var r,n,t,o,a,i,c,u,f,s,d,y,h,v;return l(this,function(l){switch(l.label){case 0:return[4,e.read()];case 1:r=l.sent(),l.label=2;case 2:if(r.done)return[3,4];if(!r.value)return[3,2];switch((n=r.value)[0]){case E.TYPE_PROMISE:if(t=n.indexOf(":"),o=Number(n.slice(1,t)),!(a=this.deferred[o]))throw Error("Deferred ID ".concat(o," not found in stream"));i=n.slice(t+1),c=void 0;try{c=JSON.parse(i)}catch(e){throw SyntaxError()}u=T.unflatten.call(this,c),a.resolve(u);break;case E.TYPE_ERROR:if(f=n.indexOf(":"),s=Number(n.slice(1,f)),!(d=this.deferred[s]))throw Error("Deferred ID ".concat(s," not found in stream"));y=n.slice(f+1),h=void 0;try{h=JSON.parse(y)}catch(e){throw SyntaxError()}v=T.unflatten.call(this,h),d.reject(v);break;default:throw SyntaxError()}return[4,e.read()];case 3:return r=l.sent(),[3,2];case 4:return[2]}})})).apply(this,arguments)}T.unflatten=function(e){var r=this.hydrated,n=this.values;if("number"==typeof e)return O.call(this,e);if(!Array.isArray(e)||!e.length)throw SyntaxError();var t=n.length,o=!0,a=!1,i=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value;n.push(l)}}catch(e){a=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}return r.length=n.length,O.call(this,t)},e.decode=function(e,r){return S.apply(this,arguments)},e.encode=function(e,r){var t=null!=r?r:{},o=t.plugins,a=t.postPlugins,i=t.signal,s={deferred:{},index:0,indices:new Map,stringified:[],plugins:o,postPlugins:a,signal:i},d=new TextEncoder,y=0;return new ReadableStream({start:function(r){return n(function(){var n,t,o,a,h,v,p,b,T,P;return l(this,function(l){switch(l.label){case 0:if(Array.isArray(n=f.flatten.call(s,e)))throw Error("This should never happen");if(n<0?r.enqueue(d.encode("".concat(n,"\n"))):(r.enqueue(d.encode("[".concat(s.stringified.join(","),"]\n"))),y=s.stringified.length-1),t=new WeakSet,!Object.keys(s.deferred).length)return[3,4];a=new Promise(function(e,r){if(o=e,i){var n=function(){return r(i.reason||Error("Signal was aborted."))};i.aborted?n():i.addEventListener("abort",function(e){n()})}}),l.label=1;case 1:if(!(Object.keys(s.deferred).length>0))return[3,3];h=!0,v=!1,p=void 0;try{for(b=function(){var e=c(P.value,2),n=e[0],o=e[1];if(t.has(o))return"continue";t.add(s.deferred[Number(n)]=Promise.race([a,o]).then(function(e){var t=f.flatten.call(s,e);if(Array.isArray(t))r.enqueue(d.encode("".concat(E.TYPE_PROMISE).concat(n,':[["').concat(E.TYPE_PREVIOUS_RESOLVED,'",').concat(t[0],"]]\n"))),s.index++,y++;else if(t<0)r.enqueue(d.encode("".concat(E.TYPE_PROMISE).concat(n,":").concat(t,"\n")));else{var o=s.stringified.slice(y+1).join(",");r.enqueue(d.encode("".concat(E.TYPE_PROMISE).concat(n,":[").concat(o,"]\n"))),y=s.stringified.length-1}},function(e){e&&(void 0===e?"undefined":u(e))==="object"&&e instanceof Error||(e=Error("An unknown error occurred"));var t=f.flatten.call(s,e);if(Array.isArray(t))r.enqueue(d.encode("".concat(E.TYPE_ERROR).concat(n,':[["').concat(E.TYPE_PREVIOUS_RESOLVED,'",').concat(t[0],"]]\n"))),s.index++,y++;else if(t<0)r.enqueue(d.encode("".concat(E.TYPE_ERROR).concat(n,":").concat(t,"\n")));else{var o=s.stringified.slice(y+1).join(",");r.enqueue(d.encode("".concat(E.TYPE_ERROR).concat(n,":[").concat(o,"]\n"))),y=s.stringified.length-1}}).finally(function(){delete s.deferred[Number(n)]}))},T=Object.entries(s.deferred)[Symbol.iterator]();!(h=(P=T.next()).done);h=!0)b()}catch(e){v=!0,p=e}finally{try{h||null==T.return||T.return()}finally{if(v)throw p}}return[4,Promise.race(Object.values(s.deferred))];case 2:return l.sent(),[3,1];case 3:o(),l.label=4;case 4:return[4,Promise.all(Object.values(s.deferred))];case 5:return l.sent(),r.close(),[2]}})})()}})},window.oc=window.oc||{},window.oc._decode=e.decode}();
//# sourceMappingURL=turbostream.js.map
